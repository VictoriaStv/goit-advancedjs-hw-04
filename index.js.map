{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/js/izi-toast.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '46874564-1fa0db17c252f120a5e59742f';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function fetchImages(query, page = 1) {\n  try {\n    const response = await axios.get(BASE_URL, {\n      params: {\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page,\n        per_page: 15,\n      },\n    });\n    return response.data;\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    throw error;\n  }\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nlet lightbox;\n\nexport function renderGallery(images) {\n  const galleryElement = document.querySelector('.gallery');\n  const markup = images\n    .map(\n      image => `<li class=\"gallery-item\">\n  <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n    <img\n      class=\"gallery-image\"\n      src=\"${image.webformatURL}\"\n      data-source=\"${image.largeImageURL}\"\n      data-likes=\"${image.likes}\"\n      data-views=\"${image.views}\"\n      data-comments=\"${image.comments}\"\n      data-downloads=\"${image.downloads}\"\n      alt=\"${image.tags}\"\n    />\n  </a>\n  <ul class=\"stats\">\n    <li class=\"stats-item\">\n      <p class=\"stats-item-header\">Likes</p>\n      <p class=\"stats-item-value\">${image.likes}</p>\n    </li>\n    <li class=\"stats-item\">\n      <p class=\"stats-item-header\">Views</p>\n      <p class=\"stats-item-value\">${image.views}</p>\n    </li>\n    <li class=\"stats-item\">\n      <p class=\"stats-item-header\">Comments</p>\n      <p class=\"stats-item-value\">${image.comments}</p>\n    </li>\n    <li class=\"stats-item\">\n      <p class=\"stats-item-header\">Downloads</p>\n      <p class=\"stats-item-value\">${image.downloads}</p>\n    </li>\n  </ul>\n</li>`\n    )\n    .join('');\n\n  galleryElement.insertAdjacentHTML('beforeend', markup);\n\n  if (!lightbox) {\n    lightbox = new SimpleLightbox('.gallery a');\n  } else {\n    lightbox.refresh();\n  }\n}\n\nexport function clearGallery() {\n  document.querySelector('.gallery').innerHTML = '';\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst ERROR_COLOR = '#ef4040';\nconst SUCCESS_COLOR = '#4caf50';\nconst TOAST_TIMEOUT = 3000;\nconst TOAST_POSITION = 'topRight';\nconst icons = {\n  error: new URL('../img/error-icon.svg', import.meta.url).href,\n  fail: new URL('../img/fail-icon.svg', import.meta.url).href,\n  success: new URL('../img/success-icon.svg', import.meta.url).href,\n};\n\nexport function showToast(type, message, title = '') {\n  const color = type === 'success' ? SUCCESS_COLOR : ERROR_COLOR;\n  iziToast.show({\n    title,\n    titleColor: 'white',\n    message,\n    timeout: TOAST_TIMEOUT,\n    iconColor: 'white',\n    messageColor: 'white',\n    position: TOAST_POSITION,\n    close: false,\n    iconUrl: icons[type],\n    backgroundColor: color,\n  });\n}\n","import './css/styles.css';\n\nimport { fetchImages } from './js/pixabay-api';\nimport { renderGallery, clearGallery } from './js/render-functions';\nimport { showToast } from './js/izi-toast';\n\nconst form = document.querySelector('.form-container');\nconst queryInput = form.querySelector('input[name=\"query\"]');\nconst loader = document.querySelector('.downloader');\nconst loadMoreBtn = document.querySelector('.load-more');\nconst loadingMessage = document.querySelector('.loading-message');\nlet currentPage = 1;\nlet currentQuery = '';\nlet totalLoadedImages = 0;\n\nform.addEventListener('submit', async event => {\n  event.preventDefault();\n  currentQuery = queryInput.value.trim();\n\n  if (!currentQuery) {\n    showToast('error', 'Please enter a search term!', 'Error');\n    return;\n  }\n\n  clearGallery();\n  loader.style.display = 'block';\n  loadingMessage.style.display = 'block';\n  loadMoreBtn.style.display = 'none';\n  currentPage = 1;\n  totalLoadedImages = 0;\n\n  try {\n    const data = await fetchImages(currentQuery, currentPage);\n    loader.style.display = 'none';\n    loadingMessage.style.display = 'none';\n\n    if (data.hits.length === 0) {\n      showToast(\n        'fail',\n        'Sorry, there are no images matching your search query.',\n        'No Results'\n      );\n    } else {\n      renderGallery(data.hits);\n      totalLoadedImages += data.hits.length;\n      if (totalLoadedImages < data.totalHits) {\n        loadMoreBtn.style.display = 'block';\n      }\n      showToast('success', 'Images loaded successfully!', 'Success');\n    }\n  } catch (error) {\n    loader.style.display = 'none';\n    loadingMessage.style.display = 'none';\n    showToast('error', 'Failed to fetch images.', 'Error');\n  }\n});\n\nloadMoreBtn.addEventListener('click', async () => {\n  currentPage += 1;\n  loader.style.display = 'block';\n  loadingMessage.style.display = 'block';\n\n  try {\n    const data = await fetchImages(currentQuery, currentPage);\n    loader.style.display = 'none';\n    loadingMessage.style.display = 'none';\n\n    renderGallery(data.hits);\n    totalLoadedImages += data.hits.length;\n\n    if (totalLoadedImages >= data.totalHits) {\n      loadMoreBtn.style.display = 'none';\n      showToast(\n        'fail',\n        \"We're sorry, but you've reached the end of search results.\",\n        'End'\n      );\n    } else {\n      scrollPage();\n      showToast('success', 'More images loaded!', 'Success');\n    }\n  } catch (error) {\n    loader.style.display = 'none';\n    loadingMessage.style.display = 'none';\n    showToast('error', 'Failed to fetch images.', 'Error');\n  }\n});\n\nfunction scrollPage() {\n  const galleryElement = document.querySelector('.gallery');\n  const { height } = galleryElement.firstElementChild.getBoundingClientRect();\n  window.scrollBy({\n    top: height * 2,\n    behavior: 'smooth',\n  });\n}\n"],"names":["API_KEY","BASE_URL","fetchImages","query","page","axios","error","lightbox","renderGallery","images","galleryElement","markup","image","SimpleLightbox","clearGallery","ERROR_COLOR","SUCCESS_COLOR","TOAST_TIMEOUT","TOAST_POSITION","icons","showToast","type","message","title","color","iziToast","form","queryInput","loader","loadMoreBtn","loadingMessage","currentPage","currentQuery","totalLoadedImages","event","data","scrollPage","height"],"mappings":"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"}